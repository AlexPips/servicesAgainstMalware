from shodan import Shodan

SHODAN_API_KEY = 'CPc8hfIMGdAKd9joBuiH2TcF6kh0jwPI'
api = Shodan(SHODAN_API_KEY)

#IP = '8.8.8.8'
#port = '8888'
results = api.search('apache')

print('Results found: {}'.format(results['total']))
for result in results['matches']:
                # print('IP: {}'.format(result['ip_str']))
                # print('Port: {}'.format(result['port']))
                # print(result['data'])
                print(' ')
                IP='{}'.format(result['ip_str'])
                host = api.host(IP)
                print("""
                    IP: {}
                    Organization: {}
                    Operating System: {}
                """.format(host['ip_str'], host.get('org', 'n/a'), host.get('os', 'n/a')))
                
                # Print all banners
                for item in host['data']:
                        print("""
                                Port: {}
                                Banner: {}
                        """.format(item['port'], item['data']))
                        print('++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++')
                
                
                
                
                print('_______________________________________________________________________________________________')