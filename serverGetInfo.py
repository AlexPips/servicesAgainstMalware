from shodan import Shodan
from xml.dom import minidom

SHODAN_API_KEY = 'CPc8hfIMGdAKd9joBuiH2TcF6kh0jwPI'
api = Shodan(SHODAN_API_KEY)

results = api.search('apache')
print('Results found: {}'.format(results['total']))
# dictionary = open('official-cpe-dictionary_v2.3.xml','r')
# xmldoc = minidom.parse(dictionary)
# doc = xml.dom.minidom.parse("Myxml.xml");


for result in results['matches']:
    print('IP: {}'.format(result['ip_str']))
    print(result['data'])
    try:
        print('Port: {}'.format(result['cpe']))
    except:
        print(" ")
    
    print("______________________________________")
# dictionary.close()